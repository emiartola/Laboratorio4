<script>
    document.addEventListener("DOMContentLoaded", function (e) {
        var miForm = document.getElementById('miForm');
        miForm.onsubmit = function (e) {
            e.preventDefault();
            var formData = new FormData(this);
            var jsonData = {};
            for (var [k, v] of formData) {
                jsonData[k] = v;
            }
            console.log(jsonData);
            try {
                apellido = document.getElementsByName("apellido")[0].value
                nombre = document.getElementsByName("nombre")[0].value
                dni = document.getElementsByName("dni")[0].value
                sector = document.getElementsByName("sector")[0].value
                fechaIngreso = document.getElementsByName("fechaIngreso")[0].value
                activo = document.getElementsByName("activo")[0].value
                let c = { apellido, nombre, dni, sector, fechaIngreso, activo }
                const b = JSON.stringify(c)
                console.log(b)
                const response = fetch('/insertar', {
                    method: 'post',
                    body: b,
                    headers: { 'Content-Type': 'application/json' }
                });
                const data = response;
                //console.log(data)
                data.then(val => console.log(val));
            } catch (error) {
                console.log(error);
            }
        }
    });
</script>

<style type="text/css">
    body {
        padding-left: 11em;
        font-family: Georgia, "Times New Roman",
            Times, serif;
        color: purple;
        background-color: #d8da3d
    }

    ul.navbar {
        position: absolute;
        top: 2em;
        left: 1em;
        width: 9em
    }

    h1 {
        font-family: Helvetica, Geneva, Arial,
            SunSans-Regular, sans-serif
    }
</style>
<link href="./general.css">

<head>
    <h1>========CREAR========</h1>
</head>

<body>


    <ng-container>

        <a href="http://localhost:3000/">[Index]</a>

        <form action="" method="post" class="form_contact" id="miForm">
            <h2></h2>

            <div class="user_info">

                <div>
                    <label for="nombre">Nombre </label>
                    <td><input type="text" name="nombre" value=" nombre" /></td>
                </div>
                <div>
                    <label for="sector">apellido</label>
                    <td><input type="text" name="apellido" value="apellido" /></td>
                </div>
                <label for="sector">dni</label>
                <td><input type="text" name="dni" value="231321" /></td>
            </div>
            <div>
                <label for="sector">sector</label>
                <td><input type="text" name="sector" value="cocina" /></td>
            </div>
            <div>
                <label for="sector">fecha Ingreso</label>
                <td><input type="text" name="fechaIngreso" value="15/5/2021" /></td>
            </div>
            <div>
                <label for="sector">activo</label>
                <td><input type="text" name="activo" value="si" /></td>
            </div>

            <h1></h1>
            <button type="submit" value="Enviar" id="btnSend">Enviar</button>

            </div>
        </form>

</body>